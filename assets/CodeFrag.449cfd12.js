var oe=Object.defineProperty,ne=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable;var V=(s,t,o)=>t in s?oe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[t]=o,I=(s,t)=>{for(var o in t||(t={}))ue.call(t,o)&&V(s,o,t[o]);if(N)for(var o of N(t))ce.call(t,o)&&V(s,o,t[o]);return s},U=(s,t)=>ne(s,le(t));import{p as ie,q as re,l as de,r as _e}from"./element-plus.8132c522.js";import{d as pe,r as m,X as me,s as fe,W as L,o as F,c as b,a as e,I as C,ag as y,u as i,R as d,x as B,P as h,af as ge,L as R,a3 as z,b1 as ve,b0 as he,$ as Ee,O as De,T as x}from"./@vue.4de0e8d7.js";import{u as Fe}from"./vuex.906b3323.js";import{e as S}from"./monaco-editor.b14c738f.js";import{H as O,a as f,_ as be,M as u}from"./index.74988d5c.js";import{O as Ce}from"./objUtils.8a6bad93.js";import"./@vueuse.dcadd341.js";import"./dayjs.b9cd1035.js";import"./axios.6b3d3030.js";import"./@element-plus.2345fbd2.js";import"./@ctrl.2e36ce53.js";import"./lodash-es.bf1863bb.js";import"./escape-html.e5dfadb9.js";import"./@popperjs.da6c49cb.js";import"./normalize-wheel-es.1c4ac15a.js";import"./vue-router.d9321232.js";import"./mavon-editor.0512e63c.js";import"./vue.fd38d502.js";const A="http://localhost:8003/frag";async function $(){const s=`${A}/init`;return O.get(s).then(t=>t.data).catch(t=>({code:f.NOT_FOUND,msg:t.message}))}async function ye(s){const t=`${A}/save`;return O.get(t,s).then(o=>o.data.code===f.OK).catch(()=>!1)}async function Be(s){const t=`${A}/delete/${s}`;return O.delete(t).then(o=>o.data.code===f.OK).catch(()=>!1)}async function xe(s){const t=`${A}/query/${s}`;return O.get(t).then(o=>o.data).catch(o=>({code:f.NOT_FOUND,msg:o.message}))}function Se(s){const t=S.createModel("",void 0);s.setModel(t)}const g=s=>(ve("data-v-0fee29b8"),s=s(),he(),s),Oe={class:"create-box"},Ae=g(()=>e("div",{class:"create__title"}," \u521B\u5EFA\u65B0\u7684\u4EE3\u7801\u7247\u6BB5 ",-1)),Te={class:"create__name"},Le=g(()=>e("span",{class:"label-text"},"\u4EE3\u7801\u7247\u6BB5\u540D\u79F0",-1)),Re={class:"input-item"},Me=g(()=>e("span",{class:"label-text"},"\u9009\u62E9\u8BED\u8A00",-1)),ke={class:"create__code"},we=g(()=>e("span",{class:"label-text"},"\u4EE3\u7801\u7247\u6BB5",-1)),Ne={class:"input-item"},Ve=g(()=>e("span",{class:"label-text"},"\u4EE3\u7801\u7247\u6BB5\u63CF\u8FF0",-1)),Ie={class:"input-item"},Ue=g(()=>e("span",{class:"label-text"},"\u6807\u7B7E",-1)),ze={class:"frag"},$e={class:"frag__nav"},He=Ee("\u65B0\u5EFA "),Pe=["onKeyup"],Ke={class:"frag-content"},Ge={class:"frag-content__container--title"},Xe=["textContent"],je={class:"function-box"},qe=["onClick"],Qe=g(()=>e("span",{class:"delete-info"},"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",-1)),We=["onClick"],Je={class:"frag-content__container--box"},Ye=["textContent"],Ze=["textContent"],et=["textContent"],tt=pe({setup(s){let t=m(""),o;const _=Fe(),M=m(null),H=m([{language:"java",value:"java",disabled:!0},{language:"typescript",value:"typescript"}]),E=m(null);let p=m(""),v=m(""),r=m(!1);const c=me({name:"",content:"",language:"",savedTime:0,tags:"",description:""});fe(()=>{const l=S.createModel(t.value,void 0,void 0);o=S.create(M.value,{model:l,tabSize:2,smoothScrolling:!0,scrollBeyondLastLine:!1,lineNumbersMinChars:0,scrollbar:{useShadows:!1,verticalHasArrows:!1,horizontalHasArrows:!1,verticalScrollbarSize:10,horizontalScrollbarSize:10,arrowSize:10},automaticLayout:!0,selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",useTabStops:!1,fontSize:17,minimap:{enabled:!1},quickSuggestionsDelay:100}),o.onDidChangeModelContent(()=>{t.value=o.getValue(),c.content=t.value}),P()});async function P(){const l=await $();if(l.code===f.CREATED){const a=l.data;_.dispatch("codeFrag/setFragData",a),u.success(l.msg)}else u.success("\u521D\u59CB\u5316\u6210\u529F")}function K(){E.value.classList.remove("close"),E.value.classList.add("open")}function G(l){p.value=l,c.language=l;const a=S.createModel(t.value,p.value);o.setModel(a)}async function X(){let l=U(I({},c),{savedTime:new Date().getMilliseconds()});await ye(l)?(_.dispatch("codeFrag/addFrag",l),Ce.clear(c),Se(o),p.value="",t.value="",u.success("\u4FDD\u5B58\u6210\u529F"),k()):u.error("\u4FDD\u5B58\u5931\u8D25")}function j(){r.value=!0}function q(l){navigator.clipboard?_.state.codeFrag.frags.forEach(a=>{if(a.name===l){navigator.clipboard.writeText(a.content),u.success(`\u590D\u5236\u6210\u529F\uFF1A${a.name}`);return}}):u.error("\u590D\u5236\u5931\u8D25")}async function Q(l){await Be(l)?(_.dispatch("codeFrag/deleteFrag",l),u.success("\u5220\u9664\u6210\u529F")):u.error("\u5220\u9664\u5931\u8D25")}function k(){E.value.classList.remove("open"),E.value.classList.add("close")}async function W(){if(v.value===""){const a=await $();a.code===f.CREATED?_.dispatch("codeFrag/setFragData",a.data):u.error("\u521D\u59CB\u5316\u5931\u8D25");return}const l=await xe(v.value);l.code===f.CREATED?(_.dispatch("codeFrag/setFragData",l.data),u.success(l.msg)):u.error(l.msg)}return(l,a)=>{const J=ie,Y=re,Z=L("plus"),T=de,ee=L("copy-document"),te=L("delete"),ae=_e;return F(),b(R,null,[e("div",Oe,[e("div",{class:"create",ref_key:"CREATE_BOX",ref:E},[Ae,e("div",Te,[Le,C(e("input",{class:"label-input",placeholder:"\u8F93\u5165\u540D\u79F0","onUpdate:modelValue":a[0]||(a[0]=n=>i(c).name=n)},null,512),[[y,i(c).name]])]),e("div",Re,[Me,d(Y,{modelValue:i(p),"onUpdate:modelValue":a[1]||(a[1]=n=>B(p)?p.value=n:p=n),placeholder:"\u9009\u62E9\u8BED\u8A00",onChange:G},{default:h(()=>[(F(!0),b(R,null,z(H.value,n=>(F(),De(J,{disabled:n.disabled,key:n.value,label:n.language,value:n.language},null,8,["disabled","label","value"]))),128))]),_:1},8,["modelValue"])]),e("div",ke,[we,e("div",{class:"create__code--editor",ref_key:"EDITOR",ref:M},null,512)]),e("div",Ne,[Ve,C(e("input",{class:"label-input",placeholder:"\u8F93\u5165\u63CF\u8FF0","onUpdate:modelValue":a[2]||(a[2]=n=>i(c).description=n)},null,512),[[y,i(c).description]])]),e("div",Ie,[Ue,C(e("input",{class:"label-input",placeholder:"\u8F93\u5165\u6807\u7B7E","onUpdate:modelValue":a[3]||(a[3]=n=>i(c).tags=n)},null,512),[[y,i(c).tags]])]),e("div",{class:"create__button"},[e("button",{class:"create__button--submit",onClick:X},"\u63D0\u4EA4"),e("button",{class:"create__button--cancel",onClick:k},"\u53D6\u6D88")])],512)]),e("div",ze,[e("div",$e,[e("button",{class:"frag__nav--create",onClick:K},[d(T,{size:15},{default:h(()=>[d(Z)]),_:1}),He]),C(e("input",{class:"frag__nav--search",type:"text","onUpdate:modelValue":a[4]||(a[4]=n=>B(v)?v.value=n:v=n),placeholder:"\u641C\u7D22\u4EE3\u7801\u7247\u6BB5",onKeyup:ge(W,["enter"])},null,40,Pe),[[y,i(v)]])]),e("div",Ke,[(F(!0),b(R,null,z(i(_).state.codeFrag.frags,(n,se)=>{var w;return F(),b("div",{class:"frag-content__container",key:se},[e("div",Ge,[e("span",{class:"frag-content-text",textContent:x(n.name)},null,8,Xe),e("div",je,[e("span",{class:"frag-copy-button",onClick:D=>q(n.name)},[d(T,null,{default:h(()=>[d(ee)]),_:1})],8,qe),e("span",{class:"frag-delete-button",onClick:j},[d(T,null,{default:h(()=>[d(te)]),_:1})])]),d(ae,{modelValue:i(r),"onUpdate:modelValue":a[6]||(a[6]=D=>B(r)?r.value=D:r=D),title:"\u5220\u9664\u63D0\u793A",width:"25%"},{footer:h(()=>[e("button",{class:"delete-cancel",onClick:a[5]||(a[5]=D=>B(r)?r.value=!1:r=!1)},"\u53D6\u6D88"),e("button",{class:"delete-confirm",onClick:D=>Q(n.name)},"\u786E\u5B9A",8,We)]),default:h(()=>[Qe]),_:2},1032,["modelValue"])]),e("div",Je,[e("div",{class:"desc",textContent:x(n.description)},null,8,Ye),e("div",{class:"code-box",textContent:x(n.content)},null,8,Ze)]),e("div",{class:"frag-content__container--tags",textContent:x((w=n.tags)==null?void 0:w.toString())},null,8,et)])}),128))])])],64)}}});var Ft=be(tt,[["__scopeId","data-v-0fee29b8"]]);export{Ft as default};
